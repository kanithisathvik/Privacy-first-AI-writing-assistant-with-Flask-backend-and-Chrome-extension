{% extends "base.html" %}

{% block title %}Dashboard - ContextGuard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="container">
        <!-- Header -->
        <div class="dashboard-header">
            <h1>AI Writing Assistant</h1>
            <p>Choose an action below or paste your text to get started</p>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-btn" data-action="summarize">
                <span class="action-icon">📝</span>
                <span class="action-label">Summarize</span>
            </button>
            <button class="action-btn" data-action="rewrite">
                <span class="action-icon">✍️</span>
                <span class="action-label">Rewrite</span>
            </button>
            <button class="action-btn" data-action="proofread">
                <span class="action-icon">✅</span>
                <span class="action-label">Proofread</span>
            </button>
            <button class="action-btn" data-action="translate">
                <span class="action-icon">🌐</span>
                <span class="action-label">Translate</span>
            </button>
        </div>

        <!-- Main Workspace -->
        <div class="workspace">
            <!-- Input Section -->
            <div class="workspace-panel">
                <div class="panel-header">
                    <h3>Input Text</h3>
                    <button class="btn-icon" id="clearInput" title="Clear">🗑️</button>
                </div>
                <textarea 
                    id="inputText" 
                    placeholder="Paste or type your text here..." 
                    rows="12"
                ></textarea>
                <div class="panel-footer">
                    <span class="char-count" id="charCount">0 characters</span>
                </div>
            </div>

            <!-- Output Section -->
            <div class="workspace-panel">
                <div class="panel-header">
                    <h3>Result</h3>
                    <div class="panel-actions">
                        <button class="btn-icon" id="copyResult" title="Copy" disabled>📋</button>
                        <button class="btn-icon" id="downloadResult" title="Download" disabled>💾</button>
                    </div>
                </div>
                <div id="outputText" class="output-display">
                    <div class="output-placeholder">
                        <div class="placeholder-icon">⚡</div>
                        <p>Your result will appear here</p>
                    </div>
                </div>
                <div class="panel-footer" id="resultInfo" style="display: none;">
                    <span class="result-method"></span>
                </div>
            </div>
        </div>

        <!-- Options Panel -->
        <div class="options-panel" id="optionsPanel">
            <h3>Options</h3>
            
            <div class="option-group" id="toneOption" style="display: none;">
                <label>Tone</label>
                <select id="tone">
                    <option value="formal">Formal</option>
                    <option value="neutral" selected>Neutral</option>
                    <option value="friendly">Friendly</option>
                </select>
            </div>

            <div class="option-group" id="levelOption" style="display: none;">
                <label>Reading Level</label>
                <select id="readingLevel">
                    <option value="basic">Basic</option>
                    <option value="intermediate" selected>Intermediate</option>
                    <option value="advanced">Advanced</option>
                </select>
            </div>

            <div class="option-group" id="lengthOption" style="display: none;">
                <label>Summary Length</label>
                <select id="summaryLength">
                    <option value="short">Short</option>
                    <option value="medium" selected>Medium</option>
                    <option value="long">Long</option>
                </select>
            </div>

            <div class="option-group" id="langOption" style="display: none;">
                <label>Target Language</label>
                <select id="targetLanguage">
                    <option value="es">Spanish</option>
                    <option value="fr">French</option>
                    <option value="de">German</option>
                    <option value="it">Italian</option>
                    <option value="pt">Portuguese</option>
                    <option value="ja">Japanese</option>
                    <option value="zh">Chinese</option>
                    <option value="ko">Korean</option>
                    <option value="ru">Russian</option>
                    <option value="ar">Arabic</option>
                </select>
            </div>

            <button class="btn btn-primary btn-full" id="processBtn" disabled>
                <span id="processBtnText">Process Text</span>
            </button>
        </div>

        <!-- Status/Loading -->
        <div class="status-bar" id="statusBar" style="display: none;">
            <div class="spinner"></div>
            <span id="statusText">Processing...</span>
        </div>

        <!-- Privacy Notice -->
        <div class="privacy-notice">
            <p>
                <strong>🔒 Privacy:</strong> 
                Your text is processed securely. For logged-in users, preferences are saved to Firebase.
                <span id="authStatus">Not signed in - using default settings</span>
            </p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
